# HOWTO

If you're interested in understanding the [Rust](https://rust-lang.org/) code snippets, you might want to learn a bit of Rust, first. [Rust by example](https://doc.rust-lang.org/rust-by-example/) is a great place to start.

This example builds a WASM module and generates a JavaScript file that wraps up the WASM module into a module [npm](https://www.npmjs.com/) can understand.

Build WASM module:
```
$  wasm-pack build
```

This will produce several files located in `pkg` directory which will be created automatically:
```
$ ls -1
README.md
helloworld_01.d.ts
helloworld_01.js
helloworld_01_bg.d.ts
helloworld_01_bg.wasm
package.json
```

You can inspect the newly generated WASM module `helloworld_01_bg.wasm` by running the following command, though be warned the output is going to be huge as the module will contain large amount of functions automatically generated by `Rust` when the module is built:
```
$ wasm-objdump pkg/helloworld_01_bg.wasm -x
```

# RUN

Note: You can skip these steps and jump right at the bottom to run the examples as `site` directory of this project contains all the necessary files to make this work.

Create a directory called `site` (as shown in this project) and copy all the newly generated files into it. This is to prevent messing about with the files in `pkg` directory which you can package up as `npm` module and upload to `npm` remote repository.

Replace the existing `package.json` file content with the snipped shown below -- this defines npm project dependencies:
```
{
  "scripts": {
    "serve": "webpack-dev-server"
  },
  "devDependencies": {
    "webpack": "^4.25.1",
    "webpack-cli": "^3.1.2",
    "webpack-dev-server": "^3.1.10"
  }
}
```

Install the nodejs dependencies:
```
$ npm install
```

In the `site` directory of this repo you cand find sample `index.html` and `index.js` files which load and serve WASM functions. Equally, `webpack.config.js` file needs to be present in the `site` directory to enable `npm run` to wexecute the JavaScript files.

You are ready to start serving your WASM codezz:
```
$ npm run serve
```

When you follow the URL printed after the `npm` dev server has started you should see alert windo pop up saying "Hello WebAssembly".
